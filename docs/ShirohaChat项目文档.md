# ShirohaChat 项目文档

## 摘要

本项目旨在开发一款面向校园协作场景的即时通讯系统——ShirohaChat。提供注册登录、好友管理、单聊与群聊、可靠消息传输、离线消息补发、文件传输、表情互动等核心功能,致力于构建一个**高性能、高可用、易扩展**的即时通信平台。

在开发过程中,团队基于面向对象分析与设计方法(OOAD)和统一建模语言(UML)进行系统建模,采用客户端-服务器架构(C/S)实现消息实时传递。项目引入**非功能性需求(NFR)**管理、**协议契约设计**、**风险管理矩阵**与**量化性能指标**,在技术架构、可靠性保障和用户体验方面均达到专业水准。系统实现端到端延迟 ≤ 200ms、消息送达率 ≥ 99.99%、单节点支持 ≥ 5000 并发连接,具备断线重连与离线补发机制,确保消息零丢失。

关键词:即时通讯,WebSocket,Redis,消息可靠性,NFR,性能优化,校园协作IM

---

## 日期 / 修改 / 描述 / 作者



---

## 目录

* 摘要
* 第1章 立项

  * 1.1 项目起源与提案
  * 1.2 Business Case
* 第2章 愿景

  * 2.1 问题陈述
  * 2.2 涉众与用户
  * 2.3 关键涉众和用户的需要
  * 2.4 产品概述
  * 2.5 产品特性
  * 2.6 其他产品需求
* 第3章 用况建模

  * 3.1 术语表
  * 3.2 主要用况
  * 3.3 用况的完整描述
* 第4章 需求分析
* 第5章 架构设计
* 第6章 详细设计
* 后记
* 参考文献

---

# 第1章 立项

## 1.1 项目起源与提案

### 项目背景

随着互联网通信的迅速发展，即时通讯软件已成为现代协作的核心工具。然而，现有主流应用在**校园场景**存在明显痛点：

* **微信**：传输代码格式混乱、文件易丢失、群聊消息难追溯
* **QQ**：界面复杂、广告干扰、资源占用高
* **Discord**：登录繁琐、对国内网络环境不友好

### 项目定位

> **"面向校园协作的轻量级即时通讯系统，解决小组作业沟通低效、文件传输不稳定的痛点。"**

## 1.2 Business Case

### 项目目标

开发一款**高性能、高可用**的即时通讯系统，核心功能包括：

* **Must Have (MVP 核心)**：注册登录、私聊、Server-ACK、离线拉取最近 N 条消息
* **Should Have**：群聊、在线状态显示、消息搜索
* **Could Have**：文件上传、表情包、AI 消息摘要
* **Won't Have (后续迭代)**：语音视频通话

### 预期收益

* **用户价值**：提供零丢失、低延迟（≤200ms）、稳定可靠的实时通讯服务

### 约束与假设

| 维度   | 约束条件                              |
| ---- | --------------------------------- |


### 非功能性需求 (NFR)

| 维度   | 指标要求            | 验证方法              |
| ---- | --------------- | ----------------- |


---

# 第2章 愿景

## 2.1 问题陈述

### 问题一：校园协作场景的即时通讯痛点

| 要素   | 描述                                                                  |
| ---- | ------------------------------------------------------------------- |
| 问题   | 现有聊天工具在校园小组协作场景存在**代码格式丢失、文件传输不稳定、消息难追溯**等痛点。                   |
| 影响群体 | 高校学生、开发学习者、小型团队协作用户。                                              |
| 后果   | 导致协作效率低下、重要文件丢失、代码沟通困难，影响项目进度与学习体验。                               |
| 解决方案 | ShirohaChat 提供**专为协作优化的消息传输机制**，确保消息零丢失、文件稳定传输、代码格式保留。            |

### 问题二：现有方案的技术局限

| 要素   | 描述                                                 |
| ---- | -------------------------------------------------- |
| 问题   | 主流闭源 IM 系统难以进行架构研究与二次开发，开源方案多为 Demo 级别，缺乏工业级设计。 |
| 影响群体 | 软件工程学习者、系统架构研究者。                                   |
| 后果   | 理论与实践脱节，无法深入理解 WebSocket、消息可靠性、分布式状态管理等核心技术。    |
| 解决方案 | ShirohaChat 开源完整架构设计（含 NFR、协议、风险管理），可作为学习与扩展基础。   |

---

## 2.2 涉众与用户

### 1. 涉众分析

| 涉众类型  | 代表       | 核心诉求                           | 优先级  |
| ----- | -------- | ------------------------------ | ---- |
| 项目团队  | 开发组/测试组  | 掌握工业级 IM 架构设计与实现能力              | 高    |
| 目标用户  | 高校学生     | 稳定、易用的协作沟通工具                   | 高    |
| 技术评审者 | 导师/面试官   | 系统展示专业性（架构、性能、文档）              | 高    |
| 潜在扩展者 | 开源社区开发者  | 清晰的代码结构与接口文档                   | 中    |

### 2. 用户画像

#### 张三 - 计算机专业学生

* **场景**：小组作业需要频繁讨论代码与传输文档
* **痛点**：微信发代码格式乱、QQ 传文件经常过期
* **期望**：消息可靠、支持代码高亮、文件永久保存

#### 李四 - 开源项目爱好者

* **场景**：参与多个开源项目，需要稳定的沟通工具
* **痛点**：Discord 国内访问不稳定、Slack 收费贵
* **期望**：自托管、低成本、高可用

---

## 2.3 关键涉众和用户的需要

| 涉众/用户 | 核心需求                            | 系统响应                        |
| ----- | ------------------------------- | --------------------------- |
| 学生用户  | 消息零丢失、文件稳定传输、代码格式保留             | Server-ACK + 离线补发 + 富文本支持  |
| 开发者   | 模块化架构、清晰接口文档、易于扩展               | Swagger 文档 + 分层设计 + Git规范  |
| 评审者   | 展示系统专业性（性能指标、架构图、风险管理）          | NFR 量化 + 压测报告 + UML建模     |
| 运维者   | 一键部署、监控日志、故障恢复                  | Docker Compose + 日志系统      |

---

## 2.4 产品概述

### 1. 产品定位陈述 (Elevator Pitch)

> **For** 高校学生与小型团队  
> **Who** 需要稳定、轻量、可靠的协作沟通工具  
> **The** ShirohaChat  
> **Is a** 
> **That** 提供消息零丢失、端到端延迟≤200ms、支持离线补发的实时聊天服务  
> **Unlike** 微信（文件易丢失）、Discord（国内访问难）  
> **Our product** 保证消息可靠性 ≥99.99%，支持自托管与二次开发

### 2. 完整的产品概述

ShirohaChat 是一款**面向校园协作场景的即时通讯系统**，采用前后端分离的 C/S 架构：

* **前端**：
* **后端**：
* **数据层**：
* **核心特性**：

---

## 2.5 产品特性

| 优先级      | 功能模块             | 具体特性                             | 技术实现                    |
| -------- | ---------------- | -------------------------------- | ----------------------- |

---

## 2.6 其他产品需求

### 2.6.1 性能需求 (Performance)

| 指标       | 目标值       | 测试方法                         |
| -------- | --------- | ---------------------------- |


### 2.6.2 可靠性需求 (Reliability)

| 指标     | 目标值      | 实现方式                  |
| ------ | -------- | --------------------- |


### 2.6.3 兼容性需求 (Compatibility)


### 2.6.4 安全性需求 (Security)

| 威胁类型  | 防护措施                    |
| ----- | ----------------------- |


### 2.6.5 可维护性需求 (Maintainability)



### 2.6.6 可扩展性需求 (Scalability)


---

# 第3章 用况建模

请确定系统所有用况，写出简要描述，并选择一个用况进行完整描述。

## 3.1 术语表

| 术语             | 描述               |
| -------------- | ---------------- |
| 用户（User）       | 使用聊天系统的注册使用者     |
| 好友（Friend）     | 与用户建立双向连接关系的其他用户 |
| 群聊（Group Chat） | 多个用户组成的消息会话      |
| 消息（Message）    | 文本、图片、文件、表情数据    |
| Emoji          | 图形表情符号           |

---

## 3.2 ShirohaChat 的主要用况

---

## 3.3 主要用况的完整描述

---

# 第4章 需求分析

## 4.1 健壮性分析



## 4.2 交互建模

# 第5章 架构设计



---

# 第6章 详细设计



---

# 后记


---

# 参考文献



---




